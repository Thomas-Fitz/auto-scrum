---
name: as-generate-project-context
description: Analyze the existing codebase and generate project-context.md with coding standards, patterns, and constraints for agents to follow
---
# as-generate-project-context

**Announce at start:** "I'm using the as-generate-project-context skill to analyze the codebase and write project-context.md."

You are generating a `project-context.md` file that all auto-scrum agents will use as their source of truth for project conventions.

## Step 1: Read Configuration
Read `.auto-scrum/config.yml` for `artifacts.base_dir`. Default to `.auto-scrum` with a visible warning if missing:
`⚠️  WARNING: .auto-scrum/config.yml not found. Using default base directory: .auto-scrum`
Set `BASE={artifacts.base_dir}`.
Set `OUT={BASE}/cross-feature/project-context.md`.

## Step 2: Codebase Scan
Examine the repository systematically:
1. List all files in the repo root (1 level deep) to identify project type and structure.
2. Find and read any of these that exist: `package.json`, `Gemfile`, `requirements.txt`, `go.mod`, `Cargo.toml`, `pom.xml`, `build.gradle`, `.nvmrc`, `.ruby-version`, `Makefile`, `Dockerfile`.
3. Find and read any of these that exist: `.eslintrc*`, `.rubocop.yml`, `pyproject.toml`, `.prettierrc*`, `tsconfig.json`.
4. Find test files (glob: `**/*.test.*`, `**/*.spec.*`, `**/test_*.py`, `spec/**`) — read 2–3 representative examples to understand test patterns.
5. Find and read 3–5 representative source files to identify naming conventions and patterns.
6. Find and read `README.md` and `CONTRIBUTING.md` if present.
7. Run `git log --oneline -20` to understand commit message conventions.

## Step 3: Synthesize and Write
Create the directory `{BASE}/cross-feature/` if it doesn't exist.
Write `{OUT}` with these exact sections:

```markdown
# Project Context
_Generated by as-generate-project-context. Regenerate with the as-generate-project-context skill or edit manually._

## Tech Stack
[language, framework, runtime version, key libraries]

## Project Structure
[annotated directory tree, 2 levels deep, key directories explained]

## Coding Standards
[exact rules: indentation, quote style, semicolons, line length, file naming]

## Naming Conventions
[variables, functions, classes, files, database tables — with examples]

## Architectural Patterns
[key patterns used in this codebase — e.g., "Repository pattern for DB access", "Controller → Service → Repository layers"]

## Testing Approach
[test framework, file location convention, how to run tests, what to test]

## Build & Run Commands
| Command | Purpose |
|---------|---------|
| `...`   | ...     |

## Key File Paths
[the 10–15 most important files agents need to know about]

## Agent Constraints
[hard rules all agents must follow — e.g., "Never modify files in vendor/", "Always use the logger at src/lib/logger.ts", "Database migrations go in db/migrate/"]
```

## Step 4: Git tracking
Run: `git add {OUT}`
Print: `✅ project-context.md written to {OUT}`
Print: `Review and edit it if needed, then agents will pick it up automatically.`
